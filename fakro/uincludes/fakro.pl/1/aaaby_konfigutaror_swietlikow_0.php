<?php

// "baza" danych
function sunlight(){
  // [1] dzień słoneczny
  // [2] dzień lekko zachmurzony
  // [3] dzień zachmurzony

    return  array(
      'b'=>array(
        1 => array( 'n'  => 11000, 'ne' => 13200, 'e'  => 19300, 'se' => 25700, 's'  => 29500, 'sw' => 23400, 'w'  => 16900, 'nw' => 23000 ),
        2 =>array(  'n'  => 10000, 'ne' => 12200, 'e'  => 18300, 'se' => 24700, 's'  => 28500, 'sw' => 22400, 'w'  => 15900, 'nw' => 22000 ), // fake
        3 =>array(  'n'  => 9000,  'ne' => 11200, 'e'  => 17300, 'se' => 23700, 's'  => 27500, 'sw' => 21400, 'w'  => 14900, 'nw' => 21000 ), // fake
      ),
    's'=>array(
        1 => array( 'n'  => 7710,  'ne' => 9620, 'e'  => 15200, 'se' => 21540, 's'  => 24940, 'sw' => 19380, 'w'  => 12720, 'nw' => 8300 ),
        2 => array( 'n'  => 7610,  'ne' => 8620, 'e'  => 14200, 'se' => 20540, 's'  => 23940, 'sw' => 18380, 'w'  => 11720, 'nw' => 8200 ),  // fake
        3 => array( 'n'  => 7510,  'ne' => 7620, 'e'  => 13200, 'se' => 19540, 's'  => 22940, 'sw' => 17380, 'w'  => 10720, 'nw' => 8100 ),  // fake
      ),
    'i'=>array(
        1 => array( 'n'  => 10570,  'ne' => 18710, 'e'  => 31170, 'se' => 39400, 's'  => 38360, 'sw' => 29330, 'w'  => 18970, 'nw' => 12830 ),
        2 => array( 'n'  => 9570,  'ne' => 17710, 'e'  => 30170, 'se' => 38400, 's'  => 37360, 'sw' => 28330, 'w'  => 17970, 'nw' => 11830 ), // fake
        3 => array( 'n'  => 9570,  'ne' => 16710, 'e'  => 29170, 'se' => 37400, 's'  => 36360, 'sw' => 27330, 'w'  => 16970, 'nw' => 10830 ), // fake
      ),
    'r'=>array(
        1 => array( 'n'  => 10200,  'ne' => 13500, 'e'  => 21060, 'se' => 28600, 's'  => 31600, 'sw' => 24500, 'w'  => 16400, 'nw' => 11000 ),
        2 => array( 'n'  => 9200,  'ne' => 12500, 'e'  => 20060, 'se' => 27600, 's'  => 30600, 'sw' => 23500, 'w'  => 15400, 'nw' => 10000 ),
        3 => array( 'n'  => 8200,  'ne' => 11500, 'e'  => 19060, 'se' => 26600, 's'  => 29600, 'sw' => 22500, 'w'  => 14400, 'nw' => 9000 ),
      ),
    'f'=>array(
        1 => array( 'n'  => 10400,  'ne' => 15000, 'e'  => 22900, 'se' => 29500, 's'  => 31000, 'sw' => 26500, 'w'  => 18600, 'nw' => 12600 ),
        2 => array( 'n'  => 9400,  'ne' => 14000, 'e'  => 21900, 'se' => 28500, 's'  => 30000, 'sw' => 25500, 'w'  => 17600, 'nw' => 11600 ),
        3 => array( 'n'  => 8400,  'ne' => 13000, 'e'  => 20900, 'se' => 27500, 's'  => 29000, 'sw' => 24500, 'w'  => 16600, 'nw' => 10600 ),
      ),
    'u'=>array(
        1 => array( 'n'  => 10200,  'ne' => 14700, 'e'  => 23600, 'se' => 28600, 's'  => 31600, 'sw' => 24500, 'w'  => 16400, 'nw' => 11000 ),
        2 => array( 'n'  => 9200,  'ne' => 13700, 'e'  => 22600, 'se' => 27600, 's'  => 30600, 'sw' => 23500, 'w'  => 15400, 'nw' => 10000 ),
        3 => array( 'n'  => 8200,  'ne' => 12700, 'e'  => 21600, 'se' => 26600, 's'  => 29600, 'sw' => 22500, 'w'  => 14400, 'nw' => 9000 ),
      ),
    'g'=>array(
        1 => array( 'n'  => 11070,  'ne' => 14200, 'e'  => 22300, 'se' => 31000, 's'  => 32700, 'sw' => 24100, 'w'  => 16200, 'nw' => 11400 ),
        2 => array( 'n'  => 10070,  'ne' => 13200, 'e'  => 21300, 'se' => 30000, 's'  => 31700, 'sw' => 23100, 'w'  => 15200, 'nw' => 10400 ),
        3 => array( 'n'  => 9070,  'ne' => 12200, 'e'  => 20300, 'se' => 29000, 's'  => 30700, 'sw' => 22100, 'w'  => 14200, 'nw' => 9400 ),
      ),
    'y'=>array(
        1 => array( 'n'  => 11800,  'ne' => 16900, 'e'  => 29300, 'se' => 38400, 's'  => 42600, 'sw' => 34200, 'w'  => 23900, 'nw' => 14400 ),
        2 => array( 'n'  => 10800,  'ne' => 15900, 'e'  => 28300, 'se' => 37400, 's'  => 41600, 'sw' => 33200, 'w'  => 22900, 'nw' => 13400 ),
        3 => array( 'n'  => 9800,  'ne' => 14900, 'e'  => 27300, 'se' => 36400, 's'  => 40600, 'sw' => 32200, 'w'  => 21900, 'nw' => 12400 ),
      ),
    'p'=>array(
        1 => array( 'n'  => 11000,  'ne' => 13000, 'e'  => 19300, 'se' => 26200, 's'  => 31200, 'sw' => 25300, 'w'  => 18400, 'nw' => 12500 ),
        2 => array( 'n'  => 10000,  'ne' => 12000, 'e'  => 18300, 'se' => 25200, 's'  => 30200, 'sw' => 24300, 'w'  => 17400, 'nw' => 11500 ),
        3 => array( 'n'  => 9000,  'ne' => 11000, 'e'  => 17300, 'se' => 24200, 's'  => 29200, 'sw' => 23300, 'w'  => 16400, 'nw' => 10500 ),
      ),
    'h'=>array(
        1 => array( 'n'  => 11000,  'ne' => 13000, 'e'  => 19300, 'se' => 26200, 's'  => 31200, 'sw' => 25300, 'w'  => 18400, 'nw' => 12500 ),
        2 => array( 'n'  => 10000,  'ne' => 12000, 'e'  => 18300, 'se' => 25200, 's'  => 30200, 'sw' => 24300, 'w'  => 17400, 'nw' => 11500 ),
        3 => array( 'n'  => 9000,  'ne' => 11000, 'e'  => 17300, 'se' => 24200, 's'  => 29200, 'sw' => 23300, 'w'  => 16400, 'nw' => 10500 ),
      ),
    't'=>array(
        1 => array( 'n'  => 13000,  'ne' => 18800, 'e'  => 31000, 'se' => 41000, 's'  => 43000, 'sw' => 37000, 'w'  => 26000, 'nw' => 16000 ),
        2 => array( 'n'  => 12000,  'ne' => 17800, 'e'  => 30000, 'se' => 40000, 's'  => 42000, 'sw' => 36000, 'w'  => 25000, 'nw' => 15000 ),
        3 => array( 'n'  => 11000,  'ne' => 16800, 'e'  => 29000, 'se' => 39000, 's'  => 41000, 'sw' => 35000, 'w'  => 24000, 'nw' => 14000 ),
      ),
    'n'=>array(
        1 => array( 'n'  => 9140,  'ne' => 11700, 'e'  => 17510, 'se' => 23270, 's'  => 25390, 'sw' => 19980, 'w'  => 13580, 'nw' => 9300 ),
        2 => array( 'n'  => 8140,  'ne' => 10700, 'e'  => 17510, 'se' => 22270, 's'  => 24390, 'sw' => 18980, 'w'  => 12580, 'nw' => 9300 ),
        3 => array( 'n'  => 7140,  'ne' => 9700,  'e'  => 17510, 'se' => 21270, 's'  => 23390, 'sw' => 17980, 'w'  => 11580, 'nw' => 9100 ),
      ),
    );
}

function L(){
  return array(0.6, 0.9 ,1.2 ,1.5 ,1.8 ,2.1 ,2.4 ,2.7 ,3 ,3.3 ,3.6 ,3.9 ,4.2 ,4.5 ,4.8 ,5.1 ,5.4 ,5.7 ,6 ,7 ,8 ,9 ,10 ,11 ,12);
}

function get_L($pipe_length){
  //$pipe_length = $pipe_length / 100;

  foreach(  L() as $key =>$row  ){
    if($row >= $pipe_length){
      return $row;
      break;
    }
  }
}


function constans(){
  return array(
  'tg_alpha'  => 0.58,
  'ln_R'      => -0.02,
  'maintenance_faktor'=>array(
    '250'=> 0.8,
    '350'=> 0.8,
    '550'=> 0.8
  ),
  'diameter'                => array(   // średnica [m]
    '250'=> 0.25,
    '350'=> 0.35,
    '550'=> 0.55
  ),
  'area'                => array(   // pole powierzchni [m]
    '250'=> 0.049,
    '350'=> 0.096,
    '550'=> 0.238
  ),
  'collar_area'                => array(   // pole powierzchni [m]
    '250'=> 0.5,
    '350'=> 0.5,
    '550'=> 1.05
  ),
  'pipe_reflectivity'           => 0.98,   // refleksyjność rury [% / 100]
  'pipe_reflectivity_elastic'   => 0.64,   // refleksyjność rury [% / 100]

  'dome_permeability'       => 0.89,   // przepuszczalność kopuły [% / 100]
  'diffuser_permeability'   => 0.85    // przepuszczalność rozpraszaczy [% / 100]
  );
}

function UF($room_index){
  $arr = array(
    '0.8'   => 0.54,
    '1'     => 0.61,
    '1.25'  => 0.68,
    '1.5'   => 0.74,
    '2'     => 0.82,
    '2.5'   => 0.89,
    '3'     => 0.93,
    '4'     => 0.98,
    '5'     => 0.99
  );
  foreach($arr as $key => $row){
    if($key >= $room_index){
      return $row;
    }
  }
}

function Mk(){
  return array(
    '250' =>array(
      '0'=>   0,
      '15'=>  2.4,
      '30'=>  4.8,
      '45'=>  7.2,
      '60'=>  9.6,
      ),
    '350' =>array(
      '0'=>   0,
      '15'=>  1.75,
      '30'=>  3.5,
      '45'=>  5.25,
      '60'=>  5.7,
      ),
   '550' =>array(
      '0'=>   0,
      '15'=>  1.15,
      '30'=>  2.3,
      '45'=>  3.45,
      '60'=>  4.5,
      )
   );
}

function MR(){
  return array(
    '250' => array(
      '0.6' => 2.4,
      '0.9' => 3.6,
      '1.2' => 4.8,
      '1.5' => 6,
      '1.8' => 7.2,
      '2.1' => 8.4,
      '2.4' => 9.6,
      '2.7' => 10.8,
      '3'   => 12,
      '3.3' => 13.2,
      '3.6' => 14.4,
      '3.9' => 15.6,
      '4.2' => 16.8,
      '4.5' => 18,
      '4.8' => 19.2,
      '5.1' => 20.4,
      '5.4' => 21.6,
      '5.7' => 22.8,
      '6'   => 24,
      '7'   => 28,
      '8'   => 32,
      '9'   => 36,
      '10'  => 40,
      '11'  => 44,
      '12'  => 48,
    ),
    '350' => array(
      '0.6' => 1.71,
      '0.9' => 2.57,
      '1.2' => 3.43,
      '1.5' => 4.29,
      '1.8' => 5.14,
      '2.1' => 6,
      '2.4' => 6.86,
      '2.7' => 7.71,
      '3'   => 8.57,
      '3.3' => 9.43,
      '3.6' => 10.29,
      '3.9' => 11.14,
      '4.2' => 12,
      '4.5' => 12.86,
      '4.8' => 13.71,
      '5.1' => 14.57,
      '5.4' => 15.43,
      '5.7' => 16.29,
      '6'   => 17.14,
      '7'   => 20,
      '8'   => 22.86,
      '9'   => 25.71,
      '10'  => 28.57,
      '11'  => 31.43,
      '12'  => 34.29
    ),
    '550' => array(
      '0.6' => 1.09,
      '0.9' => 1.64,
      '1.2' => 2.18,
      '1.5' => 2.73,
      '1.8' => 3.27,
      '2.1' => 3.82,
      '2.4' => 4.36,
      '2.7' => 4.91,
      '3'   => 5.45,
      '3.3' => 6,
      '3.6' => 6.55,
      '3.9' => 7.09,
      '4.2' => 7.64,
      '4.5' => 8.18,
      '4.8' => 8.73,
      '5.1' => 9.27,
      '5.4' => 9.82,
      '5.7' => 10.36,
      '6'   => 10.91,
      '7'   => 12.73,
      '8'   => 14.55,
      '9'   => 16.36,
      '10'  => 18.18,
      '11'  => 20,
      '12'  => 21.82
    )
  );
}

//wymagane natężenie światła
function WNS(){
  return array(
    array('Korytarze, schody',  100),
    array('Pokój odpoczynku',   100),
    array('Magazyny',           100),
    array('Łazienki, toalety',  200),
    array('Pokój ćwiczeń',      300),
    array('Rampy załadunkowe',  300),
    array('Recepcja',           300),
    array('Biura',              500),
    array('Kuchnia',            500),
    array('Pokój konferencyjny',500),
    array('Praca precyzyjna',   750)
  );
}






///////////////////////////////////////////////////
///                                             ///
///           FUNKCJE DIAGNOSTYCZNE             ///
///                                             ///
///////////////////////////////////////////////////

function _d($var){
  data_dump($var);
}

function data_dump($var, $label=null, $echo=true)
{
  $label = ($label===null) ? '' : rtrim($label) . ' ';
  ob_start();
  print_r($var);
  $output = ob_get_clean();
  $output = preg_replace("/\]\=\>\n(\s+)/m", "] => ", $output);
  if (PHP_SAPI == 'cli') {
    $output = PHP_EOL . $label
    . PHP_EOL . $output
    . PHP_EOL;
  } else {
    $output = '<pre style="color:red;font-family:Verdana; font-size:9px;line-height:12px;" >'
    . $label
    . htmlentities($output, ENT_QUOTES, 'UTF-8')
    . '</pre>';
  }
  if ($echo) {
    echo($output);
  }
  return $output;
}
